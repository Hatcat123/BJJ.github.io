
服务器的数据库崩了，提示无法载入新的数据。


进入到服务器内看下
```
df -h
```
看到应该是没有存储空间了


想着如何进行清理下垃圾，由于linux不像windows一样，清理垃圾只能清理日志与更新缓存，


先查看当前目录下的哪些文件占的多
```
du -h --max-depth=1
```
或者
``` 
du -sh *
```

清理了一些更新缓存 与docker不用的镜像。

可是40G的存储空间我只用了10G左右。其他的数据哪去了？

找到最后，发现我挂在的数据库文件夹异常的大。

进入文件夹发现`mysql-bin.000001`这样的日志文件，有好多个，每个都是1G


搜下这个文件是干啥的？


用ports安装了MySQL以后，过一段时间发现/var空间不足了，查一下，会发现是mysql-bin.000001、mysql-bin.000002等文件占用了空间，那么这些文件是干吗的？这是数据库的操作日志，例如UPDATE一个表，或者DELETE一些数据，即使该语句没有匹配的数据，这个命令也会存储到日志文件中，还包括每个语句执行的时间，也会记录进去的。

这样做主要有以下两个目的：
1：数据恢复
如果你的数据库出问题了，而你之前有过备份，那么可以看日志文件，找出是哪个命令导致你的数据库出问题了，想办法挽回损失。
2：主从服务器之间同步数据
主服务器上所有的操作都在记录日志中，从服务器可以根据该日志来进行，以确保两个同步。

处理方法分两种情况：
1：只有一个mysql服务器，那么可以简单的注释掉这个选项就行了。
vi /etc/my.cnf把里面的log-bin这一行注释掉，重启mysql服务即可。
2：如果你的环境是主从服务器，那么就需要做以下操作了。
A：在每个从属服务器上，使用SHOW SLAVE STATUS来检查它正在读取哪个日志。
B：使用SHOW MASTER LOGS获得主服务器上的一系列日志。
C：在所有的从属服务器中判定最早的日志，这个是目标日志，如果所有的从属服务器是更新的，就是清单上的最后一个日志。
D：清理所有的日志，但是不包括目标日志，因为从服务器还要跟它同步。
清理日志方法为：
PURGE MASTER LOGS TO 'mysql-bin.010';
PURGE MASTER LOGS BEFORE '2008-12-19 21:00:00';

如果你确定从服务器已经同步过了，跟主服务器一样了，那么可以直接RESET MASTER将这些文件删除。







